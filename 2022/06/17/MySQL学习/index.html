<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="MySQL学习, AKYCCCC">
    <meta name="description" content="简介MySQL的重要性MySQL好多公司都要求会用.学习视频使用MySQL8.0.26版本进行讲解，搭配使用MySQL5.7版本讲解刚开始使用windows讲解操作，之后使用linux进行操作

学习过程分为上篇和篇上篇使用windows操">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    

    <title>MySQL学习 | AKYCCCC</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.1.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">AKYCCCC</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">AKYCCCC</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/4.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">MySQL学习</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/MySQL/">
                                <span class="chip bg-color">MySQL</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/MySQL/" class="post-category">
                                MySQL
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-06-17
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>MySQL的重要性<br>MySQL好多公司都要求会用.<br>学习视频使用MySQL8.0.26版本进行讲解，搭配使用MySQL5.7版本讲解<br>刚开始使用windows讲解操作，之后使用linux进行操作</p>
<blockquote>
<p>学习过程分为上篇和篇<br>上篇使用windows操作系统进行讲解. （1~95节）<br>上篇的重点是学会sql这门语言，重中之重就是关于查询的使用.<br>还要学习DDL、DML、DCL、语句的学习<br>还会讲MySQL8.0的新特征<br>1.数据库概述与MySQL安装篇<br>2.sql之select使用篇（主要是查询的使用：子查询、多表查询）<br>3.DLL、DML、DCL、使用篇（如何创建表、如何创建数据库、修改表、删除表、删除库 ），下篇会讲数据的恢复、备份、迁移<br>4其他数据库对象篇（不是很重要，根据公司的需要进行学习）<br>5.MySQL8.0的新特性</p>
</blockquote>
<blockquote>
<p>下篇会使用linux进行操作讲解（96-199节）<br>1.MySQL架构篇，谈谈MySQL的底层架构这方面<br>2.索引及调优篇，是面试中的重点，也是实际开发的重点.<br>3.事务篇<br>4.日志与备份篇</p>
</blockquote>
<h5 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h5><p>企业里用MySQL5.7最多，学8.0没关系吗？<br>在学习的时候会使用MySQL8.0和MySQL5.7进行对比讲解.</p>
<h1 id="为什么使用数据库及数据库的概念"><a href="#为什么使用数据库及数据库的概念" class="headerlink" title="为什么使用数据库及数据库的概念"></a>为什么使用数据库及数据库的概念</h1><h2 id="为什么要使用数据库"><a href="#为什么要使用数据库" class="headerlink" title="为什么要使用数据库"></a>为什么要使用数据库</h2><p>1.持久化，把数据保存到可掉电式存储设备中以供之后使用，大多数情况下，特别是企业级应用，数据持久化意味着将内存中数据保存到硬盘上加以固化，而持久化的实现过程大多同过关系数据库来完成.（掉电就不能使用的比如说：内存）</p>
<p>2.持久化的主要作用是将内存中的数据存储在关系型数据库中，当然也可以存储在磁盘文件，XNL数据文件中</p>
<p>3.如果非常复杂或者很大的数据保存在文件中，那当要找到其中某一条数据的时候会非常麻烦.但是如果放到数据库中我们就有各种手段去优化去便利数据的查找.</p>
<p>4.比如说有的数据可以放到文件中，但是读取的时候需要用程序来读取，那单纯打开文件就不行了.</p>
<p>5.当数据具有复杂的多样性，那单纯的用文件来储存就不好了.数据库不管是从数据的条目数上来讲还是存储数据的丰富度来讲，他都要好于其他的一些介质.</p>
<h2 id="数据库与数据库管理系统"><a href="#数据库与数据库管理系统" class="headerlink" title="数据库与数据库管理系统"></a>数据库与数据库管理系统</h2><h3 id="数据库的相关概念"><a href="#数据库的相关概念" class="headerlink" title="数据库的相关概念"></a>数据库的相关概念</h3><blockquote>
<p>DB:数据库（Database）<br>即存储数据的仓库，其本质是一个文件系统。它保存了一系列有组织的数据</p>
</blockquote>
<blockquote>
<p>DBMS:数据库管理系统（Database Management System）<br>是一种操纵和管理数据库的大型软件，用于建立、使用和维护数据库，对数据库进行统一管理和控制。用户通过数据库管理系统访问数据库中表内的数据</p>
</blockquote>
<blockquote>
<p>SQL:结构化查询语言（Structured Query Language）<br>专门用来和数据库通信的语言</p>
</blockquote>
<h3 id="数据库与数据库管理系统的概念"><a href="#数据库与数据库管理系统的概念" class="headerlink" title="数据库与数据库管理系统的概念"></a>数据库与数据库管理系统的概念</h3><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-17-19-10-52.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-17-19-16-08.png"></p>
<h2 id="常见的DBMS（数据库管理系统）对比"><a href="#常见的DBMS（数据库管理系统）对比" class="headerlink" title="常见的DBMS（数据库管理系统）对比"></a>常见的DBMS（数据库管理系统）对比</h2><p>1.Oracle（老大）：也叫甲骨文，收费的，功能多，安全高，服务好.商用关系型数据库管理系统（RDBMS）<br>2.MySQL：开源免费.Oracle本来想直接收购MySQL但是没成功，后来SUN收购了MySQL，oracle收购了SUN.</p>
<blockquote>
<p>java的发明者SUN公司，后被oracle收购.</p>
</blockquote>
<p>3.microsoft SQL Server(微软的):既然是微软开发的，和微软自家的产品很适配.与WinNT完全集成，与Microsoft Backofficec产品很好的集成<br>4.DB2：IBM公司的数据库产品，收费，长应用在银行系统中<br>5.PostgresSQL:稳定性强、最符合SQL标准，开放源码、具备商业级DBMS质量，PG对数据量大的文本以及SQL处理较快</p>
<h1 id="MySQL介绍"><a href="#MySQL介绍" class="headerlink" title="MySQL介绍"></a>MySQL介绍</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>MySQL是一个开放源代码的关系型数据库管理系统</li>
<li>先被SUN收购，后来SUN被Oracle收购，MySQL的创造者担心被收购后会有闭源的风险，所以创建了MySQL的分支项目mariadb</li>
<li>MySQL6.x版本之后分为社区版（免费）和商业版（收费）</li>
<li>MySQL是一种关联数据库管理系统，将数据保存在不同的表中，而不是将数据全都放在一起，这样就增加了速度并提高了灵活性</li>
<li>MySQL是开源的，你不需要支付任何费用</li>
<li>MySQL是可以定制的，采用GPL协议，你可以修源码来开发自己的MySQL系统</li>
<li>MySQL支持大型数据库，可以处理拥有上千万条记录的大型数据库，支持5000万条记录的数据仓库，32位系统表文件最大支持4GB，64位系统表最大支持8TB</li>
<li>MySQL使用标准的SQL数据语言形式</li>
<li>MySQL可以允许允许与多个系统上，并支持多种语言，这些语言包括C&#x2F;C++,Python,java,perl,php,ruby等</li>
</ul>
<h2 id="关于MySQL8-0"><a href="#关于MySQL8-0" class="headerlink" title="关于MySQL8.0"></a>关于MySQL8.0</h2><p>MySQL8版本在功能上做了显著的改进与增强，开发者对源代码进行重构，最突出的一点是多MySQL optimizer优化器进行了改进，速度上得到了改善.用户体验更好了.</p>
<h1 id="RDBMS与非RDBMS"><a href="#RDBMS与非RDBMS" class="headerlink" title="RDBMS与非RDBMS"></a>RDBMS与非RDBMS</h1><h2 id="关系型数据库实质"><a href="#关系型数据库实质" class="headerlink" title="关系型数据库实质"></a>关系型数据库实质</h2><p>关系型数据库是最古老的数据库类型，关系型数据库模型是把复杂的数据结构归结为二元关系（即二维表格形式）<br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-17-20-47-58.png"><br>关系型数据库以行和列的形式存储数据，以便用户理解.这一系列的行和列被称为表，一组表组成一个库（database）<br>表与表之间的数据记录有关系。现实世界中的各种实体之间的各种联系均用关系模型来表示。关系型数据库就是建立在关系模型基础上的数据库<br>SQL就是关系型数据库的查询语言</p>
<h2 id="关系型数据库的优势"><a href="#关系型数据库的优势" class="headerlink" title="关系型数据库的优势"></a>关系型数据库的优势</h2><ul>
<li>复杂查询<br>可以用SQL语句方便的在一个表或多个表之间做非常复杂的数据查询</li>
<li>事物支持<br>使得对于安全性能很高的数据访问要求得以实现</li>
</ul>
<h2 id="非关系型数据库介绍"><a href="#非关系型数据库介绍" class="headerlink" title="非关系型数据库介绍"></a>非关系型数据库介绍</h2><p>可以看成关系型数据库的阉割版，基于键值对存储数据，不需要经过SQL层的解析，性能非常高。同时，减少不常用的功能，进一步提高性能</p>
<h2 id="有哪些非关系型数据库"><a href="#有哪些非关系型数据库" class="headerlink" title="有哪些非关系型数据库"></a>有哪些非关系型数据库</h2><blockquote>
<p>键值型数据库<br>使用场景是作为内存缓存，Redis是最流行的键值型数据库</p>
</blockquote>
<blockquote>
<p>文档型数据库<br>存放并获取文档，XML、JSON等格式。以文档作为处理信息的基本单位，一个文档相当于一条记录，文档数据库存放的文档就相当于键值数据库所存放的值MongoDB是最流行的文档型数据库。此外还有CouchDB等等</p>
</blockquote>
<blockquote>
<p>搜索引擎数据库<br>虽然关系型数据库使用索引提升效率，但是针对全文索引效率却较低。搜索引擎数据库就是应用在搜索领域的数据存储形式，由于搜索引擎会爬取大量数据，并特定的格式进行存储，这样在检索的时候才能保证性能最优。核心原理是倒排索引<br>典型产品：Solr、elasticsearch、splunk等</p>
</blockquote>
<blockquote>
<p>列式数据库<br>oracle、MySQL、SQLserver、都是采用行式存储。列式数据库将数据按照列存储到数据库中，好处是大量降低系统的I&#x2F;O,适合于分布式文件系统。不足在于功能少。<br>典型产品：HBase</p>
</blockquote>
<blockquote>
<p>图形数据库<br>利用图这种数据结构存储了实体（对象）之间的关系，典型例子就是社交网络中人与人的关系。数据模型主要以节点和边（关系）来实现，特点是能高效的解决复杂的关系问题<br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-17-21-35-49.png"></p>
</blockquote>
<h1 id="NoSQL的演变"><a href="#NoSQL的演变" class="headerlink" title="NoSQL的演变"></a>NoSQL的演变</h1><p>由于SQL一直霸占DBMS,所以有人想是否有一种数据库技术能远离SQL，于是NoSQL诞生了.下面是NoSQL的变化</p>
<blockquote>
<p>1970: nosql &#x3D; we have no sql<br>1980: nosql &#x3D; know sql<br>2000: nosql &#x3D; no sql!<br>2005: nosql &#x3D; not only sql<br>2013: nosql &#x3D; no,sql!</p>
</blockquote>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>实际开发中，有很多业务需求，其实并不需要完整的关系型数据库功能。非关系型数据库的功能就足够了。这种情况下，使用性能更高，成本更低的非关系型数据库更明智.</p>
<blockquote>
<p>nosql的分类很多，但是在DBMS的排行榜中还是sql影响力比较大，所以掌握sql是十分重要的.</p>
</blockquote>
<h1 id="关系型数据库设计规则"><a href="#关系型数据库设计规则" class="headerlink" title="关系型数据库设计规则"></a>关系型数据库设计规则</h1><ul>
<li>关系型数据库典型数据结构就是数据表，这些数据表的组成都是结构化（Structured）。</li>
<li>先把数据放到表中，在把表放到库中</li>
<li>一个数据库可以有多个表，每个表都有名字用来标识自己，表名具有唯一性。</li>
<li>表具有一些特性，这些特性定义了数据在表中如何存储，类似java或python中“类”的设计</li>
</ul>
<h2 id="表、记录、字段"><a href="#表、记录、字段" class="headerlink" title="表、记录、字段"></a>表、记录、字段</h2><ul>
<li>E-R（rntity-relationship,实体-联系）模型中主要有三个概念：实体集、属性、联系集.</li>
<li>一个实体集（class）对用数据库中的一个表（table），一个实体（instance）对应数据库表中的一行（row）,也称为一条记录（record）.一个属性（attribute）对应数据库表中的一列（column）,也称为一个字段（field）.<blockquote>
<p>实体集（class） - 表（table）<br>实体（instance）- 行（row） - 记录（record）<br>属性（attribute） - 列（column） - 字段（field）</p>
</blockquote>
</li>
</ul>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-09-41-49.png"></p>
<blockquote>
<p>ORM思想（object relational mapping）体现：<br>数据库中的一个表&lt;–&gt;java或python中的一个类<br>表中的一条数据&lt;–&gt;类中的一个对象（实体）<br>表中的一个列&lt;–&gt;类中的一个字段</p>
</blockquote>
<h2 id="表的关联关系"><a href="#表的关联关系" class="headerlink" title="表的关联关系"></a>表的关联关系</h2><h3 id="一对一关联（one-to-one）"><a href="#一对一关联（one-to-one）" class="headerlink" title="一对一关联（one-to-one）"></a>一对一关联（one-to-one）</h3><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-09-56-54.png"></p>
<blockquote>
<p>如果设计成一张表，在查询的时候，用sql写起来会简洁一些。但是，实际开发的时候发现这张表的字段非常多，而有些字段是常用的，有些字段不是常用的，那我完全可以把常用的字段和不常用的字段分成两张表</p>
</blockquote>
<p>两种建表原则：</p>
<ul>
<li>外键唯一：主表的主键和从表的外键（唯一），形成主外键关系，外键唯一.</li>
<li>外键是主键：主表的主键和从表的主键，形成主外键关系.<blockquote>
<p>在约束中细讲</p>
</blockquote>
</li>
</ul>
<h3 id="一对多关系（one-to-many）"><a href="#一对多关系（one-to-many）" class="headerlink" title="一对多关系（one-to-many）"></a>一对多关系（one-to-many）</h3><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-09-14.png"></p>
<blockquote>
<p>一个员工有一个部门，一个部门有不同的员工.</p>
</blockquote>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-12-12.png"></p>
<blockquote>
<p>一门课程有一个编号，一门课程有很多人考.</p>
</blockquote>
<h3 id="多对多关系（many-to-many）"><a href="#多对多关系（many-to-many）" class="headerlink" title="多对多关系（many-to-many）"></a>多对多关系（many-to-many）</h3><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-17-34.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-18-01.png"></p>
<blockquote>
<p>一个学生可以学好几门课（学生信息表），一门课也有好多学生（课程信息表），最后整合在选课信息表.</p>
</blockquote>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-21-41.png"></p>
<blockquote>
<p>一个产品可以有多个订单（订单表），一个订单可以有多个产品（产品表），最后整合在订单明细表</p>
</blockquote>
<h3 id="自我引用"><a href="#自我引用" class="headerlink" title="自我引用"></a>自我引用</h3><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-25-46.png"></p>
<h1 id="MySQL8-0卸载"><a href="#MySQL8-0卸载" class="headerlink" title="MySQL8.0卸载"></a>MySQL8.0卸载</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-41-19.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-44-48.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-45-46.png"></p>
<hr>
<h2 id><a href="#" class="headerlink" title></a><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-46-06.png"></h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-47-13.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-58-21.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-59-07.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-10-59-39.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-00-08.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-01-09.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-01-27.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-07-54.png"></p>
<h1 id="MySQL8-0安装"><a href="#MySQL8-0安装" class="headerlink" title="MySQL8.0安装"></a>MySQL8.0安装</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-09-30.png"></p>
<h2 id="MySQL8-0下载地址"><a href="#MySQL8-0下载地址" class="headerlink" title="MySQL8.0下载地址"></a>MySQL8.0下载地址</h2><p>官网：<a target="_blank" rel="noopener" href="https://www.mysql.com/">https://www.mysql.com</a><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-14-23.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-18-21.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-22-02.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-26-23.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-29-12.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-30-25.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-32-12.png"></p>
<h2 id="安装和配置"><a href="#安装和配置" class="headerlink" title="安装和配置"></a>安装和配置</h2><p>.zip的文件下完需要自己配置。<br>.msi的不需要自己配置.<br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-41-24.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-45-18.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-52-47.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-56-13.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-11-58-49.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-00-25.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-01-51.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-04-28.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-08-52.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-09-48.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-11-14.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-14-29.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-18-37.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-22-07.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-25-11.png"></p>
<h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-12-32-50.png"></p>
<h1 id="MySQL安装失败解决方法"><a href="#MySQL安装失败解决方法" class="headerlink" title="MySQL安装失败解决方法"></a>MySQL安装失败解决方法</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-13-48-01.png"></p>
<blockquote>
<p>图中地址已经失效，直接按照报错中提示的软件名去微软官网下载就可以了</p>
</blockquote>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-13-52-53.png"></p>
<blockquote>
<p>如果你在安装的时候是连网的，他安装的时候会帮你自动下载.</p>
</blockquote>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-13-54-52.png">、</p>
<blockquote>
<p>链接失效的话，自己去微软官网搜索报错中出现的软件名下载就可以了.</p>
</blockquote>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-13-57-43.png"></p>
<blockquote>
<p>删完要重启下电脑在重新安装MySQL</p>
</blockquote>
<h1 id="MySQL的登录"><a href="#MySQL的登录" class="headerlink" title="MySQL的登录"></a>MySQL的登录</h1><h2 id="服务的启动和停止"><a href="#服务的启动和停止" class="headerlink" title="服务的启动和停止"></a>服务的启动和停止</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-14-05-23.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-14-06-01.png"></p>
<blockquote>
<p>输入指令开启服务提示权限不足，就一&#x3D;以管理员身份运行CMD</p>
</blockquote>
<h2 id="MySQL登录和退出"><a href="#MySQL登录和退出" class="headerlink" title="MySQL登录和退出"></a>MySQL登录和退出</h2><h3 id="MySQL自带的登录和退出"><a href="#MySQL自带的登录和退出" class="headerlink" title="MySQL自带的登录和退出"></a>MySQL自带的登录和退出</h3><ul>
<li>MySQL为用户提供了命令窗口，见下图</li>
<li><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-14-15-04.png"></li>
<li>打开后输入密码就登录成功</li>
<li>输入quit或exit退出</li>
</ul>
<p><code>mysql -u root -P3306 -hlocalhost -p</code></p>
<ul>
<li><code>-u</code>:连接的用户，-u和用户名直接有没有空格无所谓</li>
<li><code>-p</code>:大写的P，后面写端口号（端口号下载安装MySQL那里），-P和端口号之间有没有空格无所谓</li>
<li><code>-h</code>:主机的意思（host）</li>
<li><code>-p</code>:密码<br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-14-37-31.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-14-38-24.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-14-39-39.png"></li>
</ul>
<h1 id="MySQL使用演示"><a href="#MySQL使用演示" class="headerlink" title="MySQL使用演示"></a>MySQL使用演示</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-40-57.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-35-33.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-35-48.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-36-25.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-37-10.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-37-20.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-37-40.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-38-30.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-38-55.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-39-12.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-39-21.png"></p>
<blockquote>
<p><code>show databases;</code><br>查看内容</p>
</blockquote>
<blockquote>
<p><code>create database dbtest1;</code><br>在database中新建一个叫dbtest1的数据库</p>
</blockquote>
<blockquote>
<p><code>use dbtest1;</code><br>进入dbtest1数据库中</p>
</blockquote>
<blockquote>
<p><code>create table employees(id int,name varchar(15));</code><br>在database下的dbtest1数据库中，新建一个叫employees的表</p>
</blockquote>
<blockquote>
<p><code>select * from employees;</code><br>查看叫employees的表里面的数据</p>
</blockquote>
<blockquote>
<p><code>insert into employees values(100,&#39;TOM&#39;);</code><br>在employees表中添加一条数据<br><code>insert into employees values(100,&#39;汤姆&#39;);</code><br>想向表中添加中文，直接添加就添加失败。因为使用的编码格式不同.（8.0版本可以直接添加成功）（5.7版本的不行）<br>5.7版本默认是latin1,修改为utf-8才能添加中文</p>
</blockquote>
<blockquote>
<p><code>show create table employees;</code><br>查看表的信息</p>
</blockquote>
<blockquote>
<p><code>show variables like &#39;character_%&#39;;</code><br><code>show variables like &#39;collation_%&#39;;</code><br>查看详细信息</p>
</blockquote>
<blockquote>
<p><code>create database dbtest1;</code><br>删除数据库</p>
</blockquote>
<blockquote>
</blockquote>
<h2 id="修改MySQL编码"><a href="#修改MySQL编码" class="headerlink" title="修改MySQL编码"></a>修改MySQL编码</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-15-47-21.png"></p>
<blockquote>
<p>修改好后，重启一下MySQL80服务<br><code>show variables like &#39;character_%&#39;;</code><br><code>show variables like &#39;collation_%&#39;;</code><br>查看有没有改成功</p>
</blockquote>
<p>接着试试添加中文，发现还是不行，为什么？<br>你输入<code>show create table employees;</code><br>发现这个表还是latin编码.因为改了之后，之前创建的数据库还是之前的编码.<br>那怎么办？<br>方法1：<code>create database dbtest1;</code>直接删掉数据库，然后在重新建一个新的<br>方法2：应该是有指令的，但是我不知道<br>方法3：使用图形化MySQL管理工具，在图形化管理工具里面修改就方便了.<br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-16-17-28.png"></p>
<h1 id="MySQL图形化管理工具"><a href="#MySQL图形化管理工具" class="headerlink" title="MySQL图形化管理工具"></a>MySQL图形化管理工具</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-16-26-23.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-16-33-33.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-16-34-21.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-16-36-41.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-16-38-21.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-16-36-56.png"></p>
<ul>
<li>SQLyog社区版下载地址:<a target="_blank" rel="noopener" href="https://github.com/webyog/sqlyog-community/wiki/Downloads">https://github.com/webyog/sqlyog-community/wiki/Downloads</a><h1 id="2059报错、2058报错"><a href="#2059报错、2058报错" class="headerlink" title="2059报错、2058报错"></a>2059报错、2058报错</h1><h2 id="错误描述"><a href="#错误描述" class="headerlink" title="错误描述"></a>错误描述</h2><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-19-45-17.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-19-47-09.png"><h2 id="产生原因"><a href="#产生原因" class="headerlink" title="产生原因"></a>产生原因</h2><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-19-48-21.png"></li>
</ul>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>1.升级图形界面工具版本<br>2.把MySQL8.0的用户密码加密规则还原成MySQL5.7的加密规则<br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-19-52-04.png"></p>
<h1 id="常见问题解决"><a href="#常见问题解决" class="headerlink" title="常见问题解决"></a>常见问题解决</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-20-41-36.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-20-44-11.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-20-42-09.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-20-45-15.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-20-45-26.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-20-46-12.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-20-48-39.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-20-50-07.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-18-20-50-33.png"></p>
<h1 id="第一章数据库概述课后练习"><a href="#第一章数据库概述课后练习" class="headerlink" title="第一章数据库概述课后练习"></a>第一章数据库概述课后练习</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-12-43-56.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-12-45-45.png"></p>
<h1 id="第二章MySQL环境搭建课后练习"><a href="#第二章MySQL环境搭建课后练习" class="headerlink" title="第二章MySQL环境搭建课后练习"></a>第二章MySQL环境搭建课后练习</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-12-46-32.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-12-46-49.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-12-47-12.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-12-47-45.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-12-48-11.png"></p>
<h1 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-21-12-48-38.png"></p>
<blockquote>
<p>DDL：数据定义语言.CREATE(创建)\ALTER(修改)\DROP(删除)\RENAME(重命名)\TRUNCATE(清空)<br>DML：数据操作语言.INSERT(添加)\DELETE(删除)\UPDATE(修改)\SELECT(查找)<br>DCL：数据控制语言.COMMIT(提交)\ROLLBACK(撤销、回滚)\SAVEPOINT(设置保存点)\GRANT(赋予权限)\REVOKE(回收权限)</p>
</blockquote>
<h1 id="SQL的语言规则规范"><a href="#SQL的语言规则规范" class="headerlink" title="SQL的语言规则规范"></a>SQL的语言规则规范</h1><blockquote>
<p>规则是一定要遵守<br>规范是建议我们去遵守</p>
</blockquote>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-21-13-49-15.png"></p>
<h1 id="列的别名-去重-NULL-DESL等操作"><a href="#列的别名-去重-NULL-DESL等操作" class="headerlink" title="列的别名_去重_NULL_DESL等操作"></a>列的别名_去重_NULL_DESL等操作</h1><h2 id="列的别名"><a href="#列的别名" class="headerlink" title="列的别名"></a>列的别名</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-10-11-12.png"></p>
<h2 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-10-27-56.png"></p>
<h2 id="空值参与运算（NULL）"><a href="#空值参与运算（NULL）" class="headerlink" title="空值参与运算（NULL）"></a>空值参与运算（NULL）</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-10-51-18.png"></p>
<h2 id="查询常数"><a href="#查询常数" class="headerlink" title="查询常数"></a>查询常数</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-11-17-26.png"></p>
<h1 id="显示表结构"><a href="#显示表结构" class="headerlink" title="显示表结构"></a>显示表结构</h1><blockquote>
<p>DESCRIBE 表名<br>DESC 表名</p>
</blockquote>
<h1 id="过滤数据"><a href="#过滤数据" class="headerlink" title="过滤数据"></a>过滤数据</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-12-19-58.png"></p>
<h1 id="第三章-SELECT查询语句课后练习"><a href="#第三章-SELECT查询语句课后练习" class="headerlink" title="第三章 SELECT查询语句课后练习"></a>第三章 SELECT查询语句课后练习</h1><p>1.查询员工12个月的工资总和，并起名为ANNUAL SALARY<br>理解1：计算12个月的基本工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary<span class="operator">*</span><span class="number">12</span> &quot;ANNUAL SALARY&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>
<p>理解2：计算12个月的基本工资和奖金加一起</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary<span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>IFNULL(commission_pct,<span class="number">0</span>))<span class="operator">*</span><span class="number">12</span> &quot;annual&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>
<p>2.查询employees表中去除重复的job_id以后的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> job_id</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>
<p>3.查询工资大于12000的员工姓名和工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">&gt;</span><span class="number">12000</span>;</span><br></pre></td></tr></table></figure>
<p>4.查询员工号为176的员工的姓名和部门号</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id<span class="operator">=</span><span class="number">176</span>;</span><br></pre></td></tr></table></figure>
<p>5.显示表departments的结构，并查询其中的全部数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESC</span> departments;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> departments;</span><br></pre></td></tr></table></figure>

<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-13-29-04.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-13-29-37.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-13-36-42.png"></p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-13-52-20.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-15-35-51.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-15-37-09.png"></p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-15-54-53.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-16-01-12.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-16-02-25.png"></p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-16-11-13.png"></p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-16-17-37.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-16-20-51.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-16-25-44.png"></p>
<blockquote>
<p>想用别的特殊符号代替转义字符就要这么写<br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-16-26-56.png"></p>
</blockquote>
<hr>
<h2 id="拓展，正则表达式"><a href="#拓展，正则表达式" class="headerlink" title="拓展，正则表达式"></a>拓展，正则表达式</h2><p>自己看pdf文档学习了解.</p>
<blockquote>
<p>在实际开发中，用的还是比较多的，要自己多练习</p>
</blockquote>
<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-16-55-45.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-17-49-40.png"></p>
<blockquote>
<p>注意<br>OR和AND可以一起使用，但是在使用时要注意两者的优先级，由于AND的优先级高于OR，因此先对AND两边的操作数进行操作，在于OR中的操作数结合.</p>
</blockquote>
<h2 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-22-17-57-23.png"></p>
<h1 id="第四章运算符练习"><a href="#第四章运算符练习" class="headerlink" title="第四章运算符练习"></a>第四章运算符练习</h1><p>1.选择工资不在5000到12000的员工的姓名和工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">5000</span> <span class="keyword">AND</span> <span class="number">12000</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">&lt;</span><span class="number">5000</span> <span class="keyword">OR</span> salary<span class="operator">&gt;</span><span class="number">12000</span>;</span><br></pre></td></tr></table></figure>
<p>2.选择在20或50号部门工作的员工姓名和部门号</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id<span class="operator">=</span><span class="number">20</span> <span class="keyword">OR</span> department_id<span class="operator">=</span><span class="number">50</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span>(<span class="number">20</span>,<span class="number">50</span>);</span><br></pre></td></tr></table></figure>
<p>3.选择公司中没有管理者的员工姓名及job_id</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="operator">&lt;=&gt;</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">is</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>4.选择公司中有奖金的员工姓名，工资和奖金级别</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary,commission_pct</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary,commission_pct</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> commission_pct <span class="operator">&lt;=&gt;</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>5.选择员工姓名的第三个字母是a的员工姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;__a%&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>6.选择姓名中有字母a和k的员工姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%k%&#x27;</span> <span class="keyword">OR</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%k%a%&#x27;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span> <span class="keyword">AND</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%k%&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>7.显示出表employees中first_name以e结尾的员工信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,first_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> first_name <span class="keyword">LIKE</span> <span class="string">&#x27;%e&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>用正则表达式来写</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,first_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> first_name REGEXP <span class="string">&#x27;e$&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>8.显示出表employees部门编号在80-100之间的姓名和工种</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">BETWEEN</span> <span class="number">80</span> <span class="keyword">AND</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id<span class="operator">&gt;=</span><span class="number">80</span> <span class="keyword">AND</span> department_id<span class="operator">&lt;=</span><span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<p>9.显示出表employees的manager_id是100，101，110的员工姓名，工资和管理者id</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary,manager_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">IN</span> (<span class="number">100</span>,<span class="number">101</span>,<span class="number">110</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary,manager_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id<span class="operator">=</span><span class="number">100</span> <span class="keyword">OR</span> manager_id<span class="operator">=</span><span class="number">101</span> <span class="keyword">OR</span> manager_id<span class="operator">=</span><span class="number">110</span>;</span><br></pre></td></tr></table></figure>

<h1 id="排序与分页"><a href="#排序与分页" class="headerlink" title="排序与分页"></a>排序与分页</h1><h2 id="排序数据"><a href="#排序数据" class="headerlink" title="排序数据"></a>排序数据</h2><h3 id="排序规则"><a href="#排序规则" class="headerlink" title="排序规则"></a>排序规则</h3><ul>
<li>ASC(ascend):升序</li>
<li>DESC(descend):降序<br>ORDER BY子句在SELECT语句的结尾</li>
</ul>
<h3 id="单列排序"><a href="#单列排序" class="headerlink" title="单列排序"></a>单列排序</h3><p>练习：按照salary从高到底的顺序显示员工信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<h3 id="多列排序"><a href="#多列排序" class="headerlink" title="多列排序"></a>多列排序</h3><p>练习：先按照department_id进行降序，在按照salary进行升序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,salary,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> department_id <span class="keyword">DESC</span>,salary <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure>

<h2 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h2><blockquote>
<p>LIMIT：分页<br>使用格式：LIMIT 偏移量,条目数;</p>
</blockquote>
<h3 id="MySQL使用LIMIT实现数据的分页显示"><a href="#MySQL使用LIMIT实现数据的分页显示" class="headerlink" title="MySQL使用LIMIT实现数据的分页显示"></a>MySQL使用LIMIT实现数据的分页显示</h3><p>练习：每页显示20条记录，此时显示第一页</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line">LIMIT <span class="number">0</span>,<span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p>显示第二页，每页显示20条</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line">LIMIT <span class="number">20</span>,<span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p>显示第三页，每页显示20条</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line">LIMIT <span class="number">40</span>,<span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p>以此类推<br>……</p>
<p>需求：每页显示pagesize条记录，此时显示pageno页</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT  (pageno<span class="number">-1</span>)<span class="operator">*</span>pageno pagesize;</span><br></pre></td></tr></table></figure>

<p>练习：表里有107行数据，先要显示第32、33条数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line">LIMIT <span class="number">31</span>,<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意LIMIT字句必须放在整个SELECT语句的最后</p>
</blockquote>
<h4 id="MySQL的分页的新特性"><a href="#MySQL的分页的新特性" class="headerlink" title="MySQL的分页的新特性"></a>MySQL的分页的新特性</h4><blockquote>
<p>LIMIT 条目数 OFFSET 偏移量<br>和MySQL5.7的相反了</p>
</blockquote>
<p>练习：查询员工表中工资最高的员工信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h2><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-24-19-48-38.png"></p>
<h1 id="第五章排序与分页的课后练习"><a href="#第五章排序与分页的课后练习" class="headerlink" title="第五章排序与分页的课后练习"></a>第五章排序与分页的课后练习</h1><p>1.查询员工的姓名，部门号。和年薪，按年薪降序，按姓名升序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_id,salary<span class="operator">*</span><span class="number">12</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span>,last_name <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure>
<p>2.选择工资不在8000到17000的员工的姓名和工资，按工资降序，显示21到40位置的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">&lt;</span><span class="number">8000</span> <span class="keyword">OR</span> salary<span class="operator">&gt;</span><span class="number">17000</span></span><br><span class="line"># <span class="keyword">WHERE</span> salary <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">8000</span> <span class="keyword">AND</span> <span class="number">17000</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">20</span>,<span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p>3.查询邮箱中包含e的员工信息，并按照邮箱的字节数降序，在按部门号升序.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">&#x27;%e%&#x27;</span></span><br><span class="line"># 正则表达式</span><br><span class="line"># <span class="keyword">WHERE</span> email REGEXP <span class="string">&#x27;[e]&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> LENGTH(email) <span class="keyword">DESC</span>,department_id <span class="keyword">ASC</span>; </span><br></pre></td></tr></table></figure>
<blockquote>
<p>LENGTH()是个函数<br>LENGTH()用来求字符串字节数<br>LENGTH()在单行函数的时候讲</p>
</blockquote>
<h1 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h1><p>多表查询的正确方式：需要有连接条件<br>通过部门id,找到部门名字</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees,departments</span><br><span class="line"># 连接条件</span><br><span class="line"><span class="keyword">WHERE</span> employees.`department_id`<span class="operator">=</span>departments.`department_id`;</span><br></pre></td></tr></table></figure>
<p>但是这个语句，如果department_id是NULL的,就查不出来<br>刚好有一个人的是没有部门的.所以只有106条记录<br>至于怎么才能查出来，放到外连接的时候讲</p>
<p>如果查询语句中出现了多个表中都存在的字段，则必须指明该字段所在的表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employees.employee_id,</span><br><span class="line">       departments.department_name,</span><br><span class="line">       employees.department_id</span><br><span class="line"><span class="keyword">FROM</span> employees,departments</span><br><span class="line"><span class="keyword">WHERE</span> employees.`department_id`<span class="operator">=</span>departments.`department_id`;</span><br></pre></td></tr></table></figure>
<ul>
<li>建议：从sql优化的角度，建议多表查询时，每个字段前都指明其所在的表</li>
</ul>
<p>练习：查询员工的employee_id,last_name,department_id,city</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id,</span><br><span class="line">       e.last_name,</span><br><span class="line">       d.department_name,</span><br><span class="line">       l.city</span><br><span class="line"><span class="keyword">FROM</span> employees e,</span><br><span class="line">     departments d,</span><br><span class="line">     locations l</span><br><span class="line"><span class="keyword">WHERE</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">AND</span> d.location_id <span class="operator">=</span> l.location_id;</span><br></pre></td></tr></table></figure>
<ul>
<li>结论：如果有N个表实现多表查询，则至少需要N-1个连接条件</li>
</ul>
<h2 id="多表查询的分类"><a href="#多表查询的分类" class="headerlink" title="多表查询的分类"></a>多表查询的分类</h2><h3 id="等值连接-vs-非等值连接"><a href="#等值连接-vs-非等值连接" class="headerlink" title="等值连接 vs 非等值连接"></a>等值连接 vs 非等值连接</h3><p>等值连接：就是直接通过对应的字段查询对应的数据，之前学的都是等值连接</p>
<p>非等值连接的例子：比如，在atguigudb中有job_grades的一张表.如下图所示<br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-27-18-39-21.png"><br>这张表是根据员工的工资进行分级<br>在我们实际查询的时候，我们不会说这个人的工资是什么等级，而是说，这个人的工资是多少.<br>换句话说，就是没有直接使用grade_level，而是通过lower_sal和highest_sal来查询出员工grade_level的<br>这就是非等值连接.<br>示例：查询员工的名字，工资，和工资对应的等级</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary,grade_level</span><br><span class="line"><span class="keyword">FROM</span> employees e,job_grades j</span><br><span class="line"><span class="keyword">WHERE</span> e.salary <span class="keyword">BETWEEN</span> j.lowest_sal <span class="keyword">AND</span> j.highest_sal;</span><br></pre></td></tr></table></figure>

<h2 id="自连接-vs-非自连接"><a href="#自连接-vs-非自连接" class="headerlink" title="自连接 vs 非自连接"></a>自连接 vs 非自连接</h2><p>自连接<br>练习：查询员工id,姓名，以及其管理者的id和姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id,e.last_name,</span><br><span class="line">       man.employee_id,man.last_name</span><br><span class="line"><span class="keyword">FROM</span> employees e,employees man</span><br><span class="line"><span class="keyword">WHERE</span> e.manager_id <span class="operator">=</span> man.employee_id;</span><br></pre></td></tr></table></figure>
<p>自己引用自己</p>
<p>非自连接：像之前写的那种，从不同表中查询数据.</p>
<h2 id="内连接和外连接"><a href="#内连接和外连接" class="headerlink" title="内连接和外连接"></a>内连接和外连接</h2><p>上面写的全部都是内连接</p>
<h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><p>内连接：合并具有同一列的两个以上的表的行，结果中不包含一个表与另一个表不匹配的行<br>什么意思？<br>比如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees,departments</span><br><span class="line"><span class="keyword">WHERE</span> employees.`department_id`<span class="operator">=</span>departments.`department_id`;</span><br></pre></td></tr></table></figure>
<p>这个代码通过员工表中的部门id,找到部门表中，部门id对应的部门名字<br>但是呢，因为有一个人是没有部门的.所以最后只有106条记录（应该有107条记录）<br>这就是内连接</p>
<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><p>外连接：合并具有同一列的两个以上的表的行，结果中除了包含一个表与另一个表匹配的行之外，还查询到左表或右表中不匹配的行.<br>举例说明：就是内连接例子查出那个没有部门的人.</p>
<h4 id="外连接的分类：左外连接、右外连接、满外连接"><a href="#外连接的分类：左外连接、右外连接、满外连接" class="headerlink" title="外连接的分类：左外连接、右外连接、满外连接"></a>外连接的分类：左外连接、右外连接、满外连接</h4><blockquote>
<p>左外连接：两个表在连接过程中除了返回满足条件的行以外，还返回左表中不满足条件的行<br>右外连接：两个表在连接过程中除了返回满足条件的行以外，还返回右表中不满足条件的行</p>
</blockquote>
<p>练习：查询所有员工的last_name,department_name信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees,departments</span><br><span class="line"><span class="keyword">WHERE</span> employees.department_id <span class="operator">=</span> departments.department_id(<span class="operator">+</span>);</span><br></pre></td></tr></table></figure>
<p>解释：因为在employees表中，有一个人是没有department_id的，所以导致了，在d表中查询name的时候，没有匹配的数据.<br>就相当于e表中有107条数据，有一个数据对应的department_id是空的，那么在d表中就只有106条数据.<br>打比方说就是左边腿长，右边腿短，但是裤子的裤管是一样长的.那买裤子的时候肯定是以短腿这边的长度为准买裤子<br>但是这样就很难看.<br>那怎么办呢？<br>把短腿垫高，或者把长腿砍掉一节。<br>所以我选择吧短腿垫高<br>也就是departments.department_id(+)</p>
<blockquote>
<p>注意：（+）这个语法是SQL92的，MySQL不支持这个语法，MySQL支持SQL99.<br>Oracle支持SQL92</p>
</blockquote>
<p>在SQL99语法中是使用JOIN…ON的方式实现多表查询的，这种方式也能解决外连接问题.</p>
<h1 id="SQL99语法实现多表查询"><a href="#SQL99语法实现多表查询" class="headerlink" title="SQL99语法实现多表查询"></a>SQL99语法实现多表查询</h1><h2 id="SQL99语法实现内连接"><a href="#SQL99语法实现内连接" class="headerlink" title="SQL99语法实现内连接"></a>SQL99语法实现内连接</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br></pre></td></tr></table></figure>
<p>这里只有两张表<br>3张表的话怎么写呢？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name,city</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">JOIN</span> locations l</span><br><span class="line"><span class="keyword">ON</span> d.location_id <span class="operator">=</span> l.location_id;</span><br></pre></td></tr></table></figure>
<p>每多一张表就JOIN一下，然后用ON，把关系连接起来</p>
<h2 id="SQL语法实现外连接"><a href="#SQL语法实现外连接" class="headerlink" title="SQL语法实现外连接"></a>SQL语法实现外连接</h2><p>左外连接：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br></pre></td></tr></table></figure>
<p>就是加上LEFT OUTER<br>LEFT OUTER JOIN :翻译过来就是左外连接</p>
<p>右外连接：那就是加上RIGHT PUTER JOIN </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br></pre></td></tr></table></figure>

<p>满外连接:FULL OUTER JOIN</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br></pre></td></tr></table></figure>
<p>但是呢，MySQL不支持FULL OUTER JOIN<br>MySQL要使用UNION</p>
<h2 id="UNINO的使用"><a href="#UNINO的使用" class="headerlink" title="UNINO的使用"></a>UNINO的使用</h2><p>利用UNION关键字，可以给出多条SELECT语句，并将多个SELECT的结果合并成一个结果集。<br>合并时，两个表对应列数和数据类型必须相同，并且相互对应各个SELECT语句之间使用UNION或UNION ALL关键字分隔</p>
<ul>
<li>UNION：返回两个查询的结果集的并集，去除重复记录</li>
<li>UNION ALL：返回两个查询的结果集的并集，对于两个结果集的重复部分，不去重.<blockquote>
<p>执行UNION ALL要的资源比UNION要的少，如果确定合并后数据不存在重复数据，或者不需要去除重复的数据，则尽量使用UNION ALL,以提高效率.</p>
</blockquote>
</li>
</ul>
<h1 id="7种连接的实现"><a href="#7种连接的实现" class="headerlink" title="7种连接的实现"></a>7种连接的实现</h1><p>首先要知道是哪7种<br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-28-10-36-37.png"></p>
<hr>
<p>我以查询员工employee_id,department_id为例子<br>那么employees就相当于图中的A，departments就相当于图中的B<br>下面的7种连接都用查询员工employee_id,department_id为例子来说明</p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-28-10-43-32.png"><br>这个是内连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br></pre></td></tr></table></figure>
<p>解释：e表中有员工id,没有部门名字.d表中有部门名字，但是没有有员工id.但是两张表都有部门id.<br>那现在要把e表的员工id，和d表的部门名字对应起来。就通过部门id建立联系.就可以对应起来了.<br>（因为有一个员工没有部门id,所以最后输出106条记录）</p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-28-10-56-58.png"><br>这个是左外连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br></pre></td></tr></table></figure>
<p>解释：e表有107个员工，每个员工都有员工id.但不是每个员工都有部门，其中有一个没有部门.没有部门就没有部门id.<br>既然没有部门id,那肯定就查不到对应的部门名字<br>但是，这个员工是有员工id的，那就也要把它显示出来。<br>这时就用左外连接.<br>为什么用左，不用右？<br>因为，之前说了，设e表是图中的A,d表是图中的B.<br>现在在e表中有员工id(employee_id),d表中没有对应的部门名字（department_name）.<br>很明显的，如果想要显示这个没有部门的员工，就是要显示e表中的数据.<br>又因为e表是图中的A<br>所以是左外循环<br>问：那如果e表在右，d表在左，这里是不是就用右外连接？<br>答：是.</p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-28-11-14-07.png"><br>这个是右外连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">right</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br></pre></td></tr></table></figure>
<p>解释：刚才是，员工有员工id，但是没有部门<br>现在的情况是，有部门，但是部门里没员工.<br>想把那些没员工的部门显示出来<br>而没有员工的部门在d表中，所以就是右外连接</p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-28-11-45-47.png"><br>这个我不知道叫什么</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> d.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>解释：在左外连接的基础上，过滤掉（WHERE）内连接的数据.<br>可以理解为:要查找没部门的员工，就是部门id（department_id）是NULL的<br>在这个例子中，过滤的条件是WHERE d.department_id IS NULL;<br>在不同的情况下，过滤条件是不一样的.</p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-28-11-55-16.png"><br>这个我不知道叫什么</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> e.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>解释：在右外连接的基础上，过滤掉内连接的数据<br>可以理解为：要找没有员工的部门.就是员工id（employee_id）是NULL的</p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-28-12-09-33.png"><br>这是满外连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> e.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>解释：用UNION ALL把数据连接起来<br>看成左外连接加上右中图<br>也可以是右外连接加上左中图<br>但是不可以看成左外连接加上右外连接，如果这么加左右外连接中间的那部分，会产生笛卡尔错误.</p>
<hr>
<p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-06-28-12-19-18.png"><br>这个我不知道叫什么</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> d.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> e.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>解释：就看成左中图加上右中图</p>
<h2 id="总的代码，懒人复制粘贴"><a href="#总的代码，懒人复制粘贴" class="headerlink" title="总的代码，懒人复制粘贴"></a>总的代码，懒人复制粘贴</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># 内连接</span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br><span class="line"># 显示d表</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> departments;</span><br><span class="line"># 显示e表</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees;</span><br><span class="line"># 左外连接</span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br><span class="line"># 右外连接</span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br><span class="line"># 左中图</span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> d.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"># 右中图</span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> e.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"># 满外连接</span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> e.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"># 右下图</span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> d.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> e.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h1 id="第六章多表查询课后练习"><a href="#第六章多表查询课后练习" class="headerlink" title="第六章多表查询课后练习"></a>第六章多表查询课后练习</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"># 显示表employees</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"># 显示表departments</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span><span class="keyword">FROM</span> departments;</span><br><span class="line"></span><br><span class="line"># <span class="number">1.</span>显示所有员工的姓名，部门号和部门名称。 </span><br><span class="line"><span class="keyword">SELECT</span> e.last_name,e.department_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id;</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>查询<span class="number">90</span>号部门员工的job_id和<span class="number">90</span>号部门的location_id </span><br><span class="line"><span class="keyword">SELECT</span> e.job_id,d.location_id</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> d.department_id <span class="operator">=</span> <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>选择所有有奖金的员工的 last_name , department_name , location_id , city </span><br><span class="line"><span class="keyword">SELECT</span> e.last_name,d.department_name,d.location_id,l.city</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> locations l</span><br><span class="line"><span class="keyword">ON</span> d.location_id <span class="operator">=</span> l.location_id</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span>选择city在Toronto工作的员工的 last_name , job_id , department_id , department_name </span><br><span class="line"><span class="keyword">SELECT</span> e.last_name,e.job_id,e.department_id,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">JOIN</span> locations l</span><br><span class="line"><span class="keyword">ON</span> d.location_id <span class="operator">=</span> l.location_id</span><br><span class="line"><span class="keyword">WHERE</span> l.city <span class="operator">=</span> <span class="string">&#x27;Toronto&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span>查询员工所在的部门名称、部门地址、姓名、工作、工资，其中员工所在部门的部门名称为’Executive’ </span><br><span class="line"><span class="keyword">SELECT</span> d.department_name,l.street_address,e.last_name,e.job_id,e.salary</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">JOIN</span> locations l</span><br><span class="line"><span class="keyword">ON</span> d.location_id <span class="operator">=</span> l.location_id</span><br><span class="line"><span class="keyword">WHERE</span> d.department_name <span class="operator">=</span> <span class="string">&#x27;Executive&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">6.</span>选择指定员工的姓名，员工号，以及他的管理者的姓名和员工号，结果类似于下面的格式 </span><br><span class="line"># employees  Emp  manager  Mgr</span><br><span class="line"># kochhar    <span class="number">101</span>  king     <span class="number">100</span> </span><br><span class="line"><span class="keyword">SELECT</span> emp.last_name &quot;employees&quot;,emp.employee_id &quot;Emp&quot;,</span><br><span class="line">mgr.last_name &quot;manager&quot;,mgr.employee_id &quot;Mgr&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees emp <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees mgr</span><br><span class="line"><span class="keyword">ON</span> emp.manager_id <span class="operator">=</span> mgr.employee_id;</span><br><span class="line"></span><br><span class="line"># <span class="number">7.</span>查询哪些部门没有员工 </span><br><span class="line"><span class="keyword">SELECT</span> employee_id,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> e.employee_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">8.</span> 查询哪个城市没有部门 </span><br><span class="line"><span class="keyword">SELECT</span> d.department_id,l.city</span><br><span class="line"><span class="keyword">FROM</span> locations l <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> l.location_id <span class="operator">=</span> d.location_id</span><br><span class="line"><span class="keyword">WHERE</span> d.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">9.</span> 查询部门名为 Sales 或 IT 的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> e.department_id,e.employee_id,e.last_name</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">WHERE</span> d.department_name <span class="operator">=</span> <span class="string">&#x27;sales&#x27;</span></span><br><span class="line"><span class="keyword">OR</span> d.department_name <span class="operator">=</span> <span class="string">&#x27;it&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>有的用or连接的可以用in<br>在mysql中，大小写不规范<br>有的题目中没给定明确要求要哪些：比如员工信息，可以是id,可以是名字，也可以是部门.自己看着给点信息就行.</p>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><ul>
<li>函数这块偷懒没写</li>
<li>一边用一边查一边记忆</li>
<li>想把函数全背出来太难了</li>
</ul>
<h1 id="第七章函数课后练习"><a href="#第七章函数课后练习" class="headerlink" title="第七章函数课后练习"></a>第七章函数课后练习</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"># <span class="number">1.</span>显示系统时间</span><br><span class="line"><span class="keyword">SELECT</span> NOW()</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>查询员工工号，姓名，工资，以及工资提高<span class="number">20</span><span class="operator">%</span>后的结果（<span class="keyword">new</span> salary）</span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary,salary<span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span><span class="number">0.2</span>) <span class="string">&#x27;new salary&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"># <span class="number">3.</span>将员工的姓名按首字母排序，并写出姓名的长度（length函数）</span><br><span class="line"><span class="keyword">SELECT</span> last_name,LENGTH(last_name) <span class="string">&#x27;lenbgth&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> last_name <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">4.</span>查询员工id,last_name,salary,并作为一个列输出（concat函数），别名为out_put</span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(employee_id,last_name,salary) <span class="string">&#x27;out put&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span>查询公司员工工作的年数、工作的天数、并按照工作年数进行降序排序(datediff函数)（curdate函数）</span><br><span class="line"><span class="keyword">SELECT</span> DATEDIFF(CURDATE(),hire_date)<span class="operator">/</span><span class="number">365</span> <span class="string">&#x27;worked_years&#x27;</span>,DATEDIFF(CURDATE(),hire_date)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> worked_years <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">6.</span>查询员工姓名、hire_date,department_id,满足以下条件：</span><br><span class="line"># 雇佣时间在<span class="number">1997</span>年之后，departmen_id为<span class="number">80</span>或<span class="number">90</span>或<span class="number">110</span>，commission_pct不为空(date_format函数)</span><br><span class="line"><span class="keyword">SELECT</span> last_name,hire_date,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">80</span>,<span class="number">90</span>,<span class="number">110</span>)</span><br><span class="line"><span class="keyword">AND</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"># <span class="keyword">and</span> hire_date <span class="operator">&gt;=</span> str_to_date(<span class="string">&#x27;1997-01-01&#x27;</span>,<span class="string">&#x27;%Y-%m-%d&#x27;</span>);</span><br><span class="line"><span class="keyword">AND</span> DATE_FORMAT(hire_date,<span class="string">&#x27;%Y&#x27;</span>) <span class="operator">&gt;=</span><span class="string">&#x27;1997&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">7.</span>查询公司中入职超过<span class="number">10000</span>天的员工姓名，入职时间</span><br><span class="line"><span class="keyword">SELECT</span> last_name,hire_date</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> DATEDIFF(CURDATE(),hire_date)<span class="operator">&gt;=</span><span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">8.</span>做一个查询，产生下面的结果(concat函数)</span><br><span class="line"># <span class="operator">&lt;</span>last_name<span class="operator">&gt;</span>earns<span class="operator">&lt;</span>salary<span class="operator">&gt;</span>monthly but wants <span class="operator">&lt;</span>salary<span class="operator">*</span><span class="number">3</span><span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(last_name,<span class="string">&#x27;earns&#x27;</span>,salary,<span class="string">&#x27;mothly but wants&#x27;</span>,salary<span class="operator">*</span><span class="number">3</span>)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"># <span class="number">9.</span>使用<span class="keyword">case</span><span class="operator">-</span><span class="keyword">when</span>，按照下面的条件： </span><br><span class="line"># job         grade </span><br><span class="line"># AD_PRES     A </span><br><span class="line"># ST_MAN      B </span><br><span class="line"># IT_PROG     C </span><br><span class="line"># SA_REP      D </span><br><span class="line"># ST_CLERK    E</span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="string">&#x27;last_name&#x27;</span>,job_id <span class="string">&#x27;Job_id&#x27;</span>,</span><br><span class="line"><span class="keyword">CASE</span> job_id </span><br><span class="line"><span class="keyword">WHEN</span> <span class="string">&#x27;AD_PRES&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;A&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="string">&#x27;ST_MAN&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;B&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="string">&#x27;IT_PROG&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;C&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="string">&#x27;SA_REP&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;D&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="string">&#x27;ST_CLERK&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;E&#x27;</span></span><br><span class="line"><span class="keyword">END</span>&quot;GRADE&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>
<ul>
<li>有的函数名不同但是效果是不一样的</li>
<li>注意语法不要写错.</li>
</ul>
<h1 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h1><p>聚合函数又叫组函数，通常是对表中的数据进行统计和计算，一般结合分组(group by)来使用，用于统计和计算分组数据<br>常用的聚合函数:</p>
<ul>
<li>count(col): 表示求指定列的总行数</li>
<li>max(col): 表示求指定列的最大值</li>
<li>min(col): 表示求指定列的最小值</li>
<li>sum(col): 表示求指定列的和</li>
<li>avg(col): 表示求指定列的平均值</li>
</ul>
<p>练习：查询部门id为10、20、30、40，这4个部门中最高工资比10000高的部门信息<br>方式1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary)<span class="operator">&gt;</span><span class="number">10000</span>;</span><br></pre></td></tr></table></figure>
<p>方式2</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary)<span class="operator">&gt;</span><span class="number">10000</span></span><br><span class="line"><span class="keyword">AND</span> department_id <span class="keyword">IN</span> (<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当过滤条件中有聚合函数时，此过滤条件必须声明在HAVING中<br>当过滤条件中没有聚合函数时，次过滤条件声明在WHERE或HAVING中都是可以的，但是建议大家声明在WHERE中</p>
</blockquote>
<h2 id="WHERE和HAVING对比"><a href="#WHERE和HAVING对比" class="headerlink" title="WHERE和HAVING对比"></a>WHERE和HAVING对比</h2><p>1.从适用范围上来讲，HAVING的适用范围更广<br>2.如果过滤条件中没有聚合函数，WHERE的效率高于HAVING</p>
<h1 id="SQL底层执行原理"><a href="#SQL底层执行原理" class="headerlink" title="SQL底层执行原理"></a>SQL底层执行原理</h1><p><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-07-01-15-49-03.png"><br><img src="/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/2022-07-01-16-05-37.png"></p>
<h1 id="第8章聚合函数课后练习"><a href="#第8章聚合函数课后练习" class="headerlink" title="第8章聚合函数课后练习"></a>第8章聚合函数课后练习</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">1.</span><span class="keyword">where</span>子句可否使用组函数进行过滤? </span><br><span class="line"># 不行</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>查询公司员工工资的最大值，最小值，平均值，总和</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary),<span class="built_in">MIN</span>(salary),<span class="built_in">AVG</span>(salary),<span class="built_in">SUM</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line">#<span class="number">3.</span>查询各job_id的员工工资的最大值，最小值，平均值，总和 </span><br><span class="line"><span class="keyword">SELECT</span> job_id,<span class="built_in">MAX</span>(salary),<span class="built_in">MIN</span>(salary),<span class="built_in">AVG</span>(salary),<span class="built_in">SUM</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id;</span><br><span class="line"></span><br><span class="line">#<span class="number">4.</span>选择具有各个job_id的员工人数 </span><br><span class="line"><span class="keyword">SELECT</span> job_id,<span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id;</span><br><span class="line"></span><br><span class="line"># <span class="number">5.</span>查询员工最高工资和最低工资的差距（DIFFERENCE）</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary)<span class="operator">-</span><span class="built_in">MIN</span>(salary) <span class="string">&#x27;DIFFERENCE&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"> </span><br><span class="line"># <span class="number">6.</span>查询各个管理者手下员工的最低工资，其中最低工资不能低于<span class="number">6000</span>，没有管理者的员工不计算在内 </span><br><span class="line"><span class="keyword">SELECT</span> manager_id,<span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> manager_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MIN</span>(salary)<span class="operator">&gt;=</span><span class="number">6000</span></span><br><span class="line"><span class="keyword">AND</span> manager_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> manager_id,<span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> manager_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MIN</span>(salary)<span class="operator">&gt;=</span><span class="number">6000</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">7.</span>查询所有部门的名字，location_id，员工数量和平均工资，并按平均工资降序 </span><br><span class="line"><span class="keyword">SELECT</span> d.department_name,d.location_id,<span class="built_in">COUNT</span>(employee_id),<span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> departments d <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees e</span><br><span class="line"><span class="keyword">ON</span> d.department_id <span class="operator">=</span> e.department_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_name,location_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary) <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"># <span class="number">8.</span>查询每个工种、每个部门的部门名、工种名和最低工资</span><br><span class="line"><span class="keyword">SELECT</span> d.department_name,e.job_id,<span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees e <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_name,job_id</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> d.department_name,e.job_id,<span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> departments d <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees e</span><br><span class="line"><span class="keyword">ON</span> d.department_id <span class="operator">=</span> e.department_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_name,job_id</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;&#x2F;<br>&#x2F;&#x2F;&#x2F;</p>
<h1 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h1><h2 id="单行子查询"><a href="#单行子查询" class="headerlink" title="单行子查询"></a>单行子查询</h2><p>单号子查询操作符 &gt; &lt;&gt; &lt; &lt;&#x3D;&gt; &#x3D;<br>需求：谁的工资比Abel高<br>方式1：先查出Abel的工资是多少，在用查出来的工资，重新写一段代码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>;# <span class="number">11000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">&gt;</span><span class="number">11000</span>;</span><br></pre></td></tr></table></figure>
<p>方式2：自连接，先找到Abel的数据（e1）,在用Abel的数据(e1)和全部数据(e2)比较</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e2.last_name,e2.salary</span><br><span class="line"><span class="keyword">FROM</span> employees e1,employees e2</span><br><span class="line"><span class="keyword">WHERE</span> e1.last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> e2.salary <span class="operator">&gt;</span> e1.salary;</span><br></pre></td></tr></table></figure>
<p>方式3：子查询<br>方式1是先查出来工资然后记下来，在写一个查询，子查询就相当于把2个查询合在一起</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span>( <span class="keyword">SELECT</span> salary</span><br><span class="line">		<span class="keyword">FROM</span> employees</span><br><span class="line">		<span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>注意事项：</p>
<ul>
<li>子查询要包含在括号内</li>
<li>将子查询放在比价条件的右侧</li>
<li>单行操作符对应单行子查询，多行操作符对应多行子查询</li>
</ul>
<p>练习：工资大于149号员工工资的员工信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span>( <span class="keyword">SELECT</span> salary</span><br><span class="line">		<span class="keyword">FROM</span> employees</span><br><span class="line">		<span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">149</span></span><br><span class="line">		);</span><br></pre></td></tr></table></figure>

<p>练习：返回job_id与141号员工相同，salary比143号员工多的员工姓名、job_id和工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> job_id <span class="operator">=</span> (<span class="keyword">SELECT</span> job_id</span><br><span class="line">		<span class="keyword">FROM</span> employees</span><br><span class="line">		<span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span></span><br><span class="line">		)</span><br><span class="line"><span class="keyword">AND</span> salary <span class="operator">&gt;</span> (  <span class="keyword">SELECT</span> salary</span><br><span class="line">		<span class="keyword">FROM</span> employees</span><br><span class="line">		<span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">143</span></span><br><span class="line">		);</span><br></pre></td></tr></table></figure>

<p>练习：返回公司工资最少的员工的last_name,job_id,salary</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line">		<span class="keyword">FROM</span> employees);</span><br></pre></td></tr></table></figure>

<p>练习：查询与141号员工的manager_id和department_id相同的其他员工的employee_id,manager_id,department_id</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,manager_id,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="operator">=</span> (    <span class="keyword">SELECT</span> manager_id</span><br><span class="line">			<span class="keyword">FROM</span> employees</span><br><span class="line">			<span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span></span><br><span class="line">			)</span><br><span class="line"><span class="keyword">AND</span> department_id <span class="operator">=</span> (   <span class="keyword">SELECT</span> department_id</span><br><span class="line">			<span class="keyword">FROM</span> employees</span><br><span class="line">			<span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span>)</span><br><span class="line"><span class="keyword">AND</span> employee_id <span class="operator">!=</span> <span class="number">141</span>;</span><br></pre></td></tr></table></figure>

<p>练习：查询最低工资大于50号部门最低工资的部门id和最低工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MIN</span>(salary) <span class="operator">&gt;</span>(   <span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line">			<span class="keyword">FROM</span> employees</span><br><span class="line">			<span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">50</span>);</span><br></pre></td></tr></table></figure>

<p>练习：显示员工的employee_id,last_name和location.<br>其中，若员工department_id与location_id为1800的department_id相同，<br>则location为<code>canada</code>,其余为<code>usa</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,</span><br><span class="line"><span class="keyword">CASE</span> department_id <span class="keyword">WHEN</span> (<span class="keyword">SELECT</span> department_id</span><br><span class="line">			 <span class="keyword">FROM</span> departments</span><br><span class="line">			 <span class="keyword">WHERE</span> location_id <span class="operator">=</span> <span class="number">1800</span>) <span class="keyword">THEN</span> <span class="string">&#x27;Canada&#x27;</span></span><br><span class="line">			 <span class="keyword">ELSE</span> <span class="string">&#x27;USA&#x27;</span> </span><br><span class="line">			 <span class="keyword">END</span> </span><br><span class="line">			 &quot;location&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="子查询中的空值问题"><a href="#子查询中的空值问题" class="headerlink" title="子查询中的空值问题"></a>子查询中的空值问题</h2><p>看一段代码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> job_id <span class="operator">=</span> (<span class="keyword">SELECT</span> job_id</span><br><span class="line">		<span class="keyword">FROM</span> employees</span><br><span class="line">		<span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;Haas&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>这段代码的意思是，先找一个叫Haas的员工的(工作id)job_id，然后在找和Haas的工作id相同的员工的工作id和名字<br>问题来了：其实这个公司没有叫Haas的人<br>那子查询查出来就是一个空值（没有结果）<br>然后整个查询查出来的也是空值，不会报错.</p>
<h2 id="非法使用子查询"><a href="#非法使用子查询" class="headerlink" title="非法使用子查询"></a>非法使用子查询</h2><p>例子：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line">		<span class="keyword">FROM</span> employees</span><br><span class="line">		<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id);</span><br></pre></td></tr></table></figure>
<p>在这个例子的子查询（括号里的内容）中，查出来的内容是多行的.<br>但是where条件中用的是&#x3D;号，&#x3D;号是单行操作符。<br>最后程序报错</p>
<h2 id="多行子查询"><a href="#多行子查询" class="headerlink" title="多行子查询"></a>多行子查询</h2><p>多行子查询操作符:IN\ANY\ALL\SOME(同ANY)<br>例子：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line">		<span class="keyword">FROM</span> employees</span><br><span class="line">		<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id);</span><br></pre></td></tr></table></figure>

<p>练习：返回其他job_id中比job_id为’IT_PROG’部门任一工资低的员工的员工号，姓名、job_id以及salary<br>首先：找到job_id为’IT_PROG’部门的工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">&#x27;IT_PROG&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>然后：看剩下的条件.（返回其他job_id中）（任一工资低的员工的员工号，姓名、job_id以及salary）<br>（返回其他job_id中）：这句话的意思就是，在查出来的结果中，去掉job_id为’IT_PROG’的数据<br>（任一工资低的员工的员工号，姓名、job_id以及salary）：这句话，就是简单的查询<br>因为过滤条件是任一工资低的，所以用&lt;ANY<br>最后：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> job_id <span class="operator">&lt;&gt;</span> <span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> salary <span class="operator">&lt;</span> <span class="keyword">ANY</span> (<span class="keyword">SELECT</span> salary</span><br><span class="line">		<span class="keyword">FROM</span> employees</span><br><span class="line">		<span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">&#x27;IT_PROG&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>练习：返回其他job_id中比job_id为’IT_PROG’部门所有工资低的员工的员工号，姓名、job_id以及salary<br>和上一题比较，题目中的任一被改成所有了</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> job_id <span class="operator">&lt;&gt;</span> <span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> salary <span class="operator">&lt;</span> <span class="keyword">ALL</span> (<span class="keyword">SELECT</span> salary</span><br><span class="line">		<span class="keyword">FROM</span> employees</span><br><span class="line">		<span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">&#x27;IT_PROG&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>练习：查询平均工资最低的部门id<br>先查出每个部门的平均工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>
<p>然后在找最低的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(<span class="built_in">AVG</span>(salary))</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>
<p>这种写法是可以的，但是在MYSQL中不支持这样写，oracle可以这么写（付费无敌）</p>
<p>在MySQL可以要这么写<br>方式1：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">AVG</span>(salary) <span class="operator">=</span> (  <span class="keyword">SELECT</span> <span class="built_in">MIN</span>(avg_sal)</span><br><span class="line">			<span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) avg_sal</span><br><span class="line">				<span class="keyword">FROM</span> employees</span><br><span class="line">				<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id) t_dept_avg_sal</span><br><span class="line">				);</span><br></pre></td></tr></table></figure>
<p>1.先找出所有部门的平均工资，给平均工资重命名为avg_sal，然后把平均工资看成新的一张表。在看成新的一张表的时候，要给这张表起个别名（t_dept_avg_sal）<br>2.那们现在就可以FROM这张表，来求出其中avg_sal最少的部门了<br>3.求出来了最少的平均工资之后，只要用employees表中平均工资和求出来的最少平均工资相等作为过滤条件，就可以查到部门id了</p>
<p>方式2：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">AVG</span>(salary) <span class="operator">&lt;=</span> <span class="keyword">ALL</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) avg_sal</span><br><span class="line">				<span class="keyword">FROM</span> employees</span><br><span class="line">				<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id);</span><br></pre></td></tr></table></figure>
<p>解释：子查询查出了所有的部门的平均工资，那只要小于等于全部&lt;&#x3D;ALL（查出的所有的部门的平均工资）</p>
<h2 id="多行函数空值问题"><a href="#多行函数空值问题" class="headerlink" title="多行函数空值问题"></a>多行函数空值问题</h2><p>在多行函数的子查询中，也要小心不要出现空值.</p>
<h1 id="相关子查询"><a href="#相关子查询" class="headerlink" title="相关子查询"></a>相关子查询</h1><p>题目：查询员工中工资大于本部门平均工资的员工的last_name,salary和其department_id<br>方式1：使用相关子查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees e1</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">&gt;</span>(  <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line">		<span class="keyword">FROM</span> employees e2</span><br><span class="line">		<span class="keyword">WHERE</span> department_id<span class="operator">=</span>e1.department_id);</span><br></pre></td></tr></table></figure>

<p>方法2：在FROM中声明子查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,salary,e1.department_id </span><br><span class="line"><span class="keyword">FROM</span> employees e1,(<span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) dept_avg_sal </span><br><span class="line">			<span class="keyword">FROM</span> employees </span><br><span class="line">			<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id) e2 </span><br><span class="line">			<span class="keyword">WHERE</span> e1.`department_id` <span class="operator">=</span> e2.department_id </span><br><span class="line">			<span class="keyword">AND</span> e2.dept_avg_sal <span class="operator">&lt;</span> e1.`salary`;</span><br></pre></td></tr></table></figure>

<p>题目：查询员工的id,salary,按照department_name 排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,salary </span><br><span class="line"><span class="keyword">FROM</span> employees e </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ( <span class="keyword">SELECT</span> department_name </span><br><span class="line">           <span class="keyword">FROM</span> departments d </span><br><span class="line">           <span class="keyword">WHERE</span> e.`department_id` <span class="operator">=</span> d.`department_id` );</span><br></pre></td></tr></table></figure>

<p>题目：若employees表中employee_id与job_history表中employee_id相同的数目不小于2，输出这些相同<br>id的员工的employee_id,last_name和其job_id</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,job_id</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">WHERE</span> <span class="number">2</span> <span class="operator">&lt;=</span> (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line">            <span class="keyword">FROM</span> job_history j</span><br><span class="line">            <span class="keyword">WHERE</span> e.employee_id <span class="operator">=</span> j.employee_id</span><br><span class="line">	   );</span><br></pre></td></tr></table></figure>

<h1 id="EXISTS-与-NOT-EXISTS关键字"><a href="#EXISTS-与-NOT-EXISTS关键字" class="headerlink" title="EXISTS 与 NOT EXISTS关键字"></a>EXISTS 与 NOT EXISTS关键字</h1><ul>
<li>关联子查询通常也会和 EXISTS操作符一起来使用，用来检查在子查询中是否存在满足条件的行。</li>
<li>如果在子查询中不存在满足条件的行：<ul>
<li>条件返回 FALSE</li>
<li>继续在子查询中查找</li>
</ul>
</li>
<li>如果在子查询中存在满足条件的行：<ul>
<li>不在子查询中继续查找</li>
<li>条件返回 TRUE NOT EXISTS关键字表示如果不存在某种条件，则返回TRUE，否则返回FALSE</li>
</ul>
</li>
</ul>
<p>练习：查询公司管理者的employee_id,last_name,job_id,department_id</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 方式<span class="number">1</span>：自连接</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> e2.employee_id,e2.last_name,e2.job_id,e2.department_id</span><br><span class="line"><span class="keyword">FROM</span> employees e1 <span class="keyword">JOIN</span> employees e2 </span><br><span class="line"><span class="keyword">ON</span> e1.manager_id <span class="operator">=</span> e2.employee_id;</span><br><span class="line"></span><br><span class="line"># 方式<span class="number">2</span>：子查询</span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,job_id,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> manager_id</span><br><span class="line">                     <span class="keyword">FROM</span> employees);</span><br><span class="line">                     </span><br><span class="line"># 方式<span class="number">3</span>：使用EXTSTS</span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,job_id,department_id </span><br><span class="line"><span class="keyword">FROM</span> employees e1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line">              <span class="keyword">FROM</span> employees e2</span><br><span class="line">              <span class="keyword">WHERE</span> e1.employee_id <span class="operator">=</span> e2.manager_id);</span><br></pre></td></tr></table></figure>
<p>题目：查询departments表中，不存在于employees表中的部门的department_id和department_name</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id, department_name </span><br><span class="line"><span class="keyword">FROM</span> departments d </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line">                  <span class="keyword">FROM</span> employees </span><br><span class="line">                  <span class="keyword">WHERE</span> department_id <span class="operator">=</span> d.department_id);</span><br></pre></td></tr></table></figure>
                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">AKYCCCC</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://akycccc.github.io/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/">https://akycccc.github.io/2022/06/17/MySQL%E5%AD%A6%E4%B9%A0/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">AKYCCCC</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/MySQL/">
                                    <span class="chip bg-color">MySQL</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/06/18/%E4%B8%8D%E6%98%AF%E5%86%85%E9%83%A8%E6%88%96%E8%80%85%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4%EF%BC%8C%E4%B9%9F%E4%B8%8D%E6%98%AF%E5%8F%AF%E8%BF%90%E8%A1%8C%E7%9A%84%E7%A8%8B%E5%BA%8F%E6%88%96%E6%89%B9%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.jpg" class="responsive-img" alt="不是内部或者外部命令，也不是可运行的程序或批处理文件">
                        
                        <span class="card-title">不是内部或者外部命令，也不是可运行的程序或批处理文件</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-06-18
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94/" class="post-category">
                                    疑难解答
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/06/13/%E4%BF%AE%E6%94%B9%E4%BA%86%E6%9F%90%E4%BA%9B%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%90%8E%E5%8D%9A%E5%AE%A2hexo-command-not-found/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/13.jpg" class="responsive-img" alt="修改了某些环境变量后博客hexo: command not found,">
                        
                        <span class="card-title">修改了某些环境变量后博客hexo: command not found,</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-06-13
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94/" class="post-category">
                                    疑难解答
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='true'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2022</span>
            
            <a href="/about" target="_blank">AKYCCCC</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2022";
                        var startMonth = "5";
                        var startDate = "5";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/AKYCCCC/AKYCCCC.github.io" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:954660147@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=954660147" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 954660147" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="/libs/background/canvas-nest.js"></script>
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
